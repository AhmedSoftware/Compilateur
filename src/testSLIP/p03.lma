00000   LDA  11, 0 
00004   LDA  12, 588
00008   LDA  13, 65428
00012   JUMP 10, 26
00016   LDM  14, 65432
00020   HALT  0, 0 
00022   JUMP  0, 20
// Begin of main
// Assez de place pour un nouveau frame ?
00026   LDA   0, 00032 (12)
00030   COMP 13, 0 
00032   JGE   0, 00046
65532   LIT  C'ERR:'
00036   LDM  14, 65532
65528   LIT  C'OVFL'
00040   LDM  15, 65528
00044   HALT  0, 0 
00046   STM  11, 00024 (12)
00050   STM  10, 00028 (12)
00054   LDA  11, 00000 (12)
00058   ADDA 12, 00032
00062   JUMP  0, 00086 (0)
00066   LDM   0, 00000 (11)
00070   LDA  12, 00000 (11)
00074   LDM  11, 00024 (12)
00078   LDM  10, 00028 (12)
00082   JUMP  0, 00000 (10)
// @1 read x#1 -> @2
65524   LIT  C' IN:'
00086   LDM  14, 65524
00090   HALT  0, 0 
00092   STM  15, 00004 (11)
// @2 #3 := x#1 -> @3
00096   LDM   0, 00004 (11)
00100   STM   0, 00012 (11)
// @3 #4 := 0-2 -> @4
65520   LIT  I(0)
00104   LDM   0, 65520
65516   LIT  I(2)
00108   LDM   1, 65516
00112   SUB   0, 1 
00114   STM   0, 00016 (11)
// @4 #4 := #4 -> @5
00118   LDM   0, 00016 (11)
00122   STM   0, 00016 (11)
// @5 if #3 < #4 then -> @7 else -> @6
00126   LDM   0, 00012 (11)
00130   LDM   1, 00016 (11)
00134   COMP  0, 1 
00136   JL    0, 166
00140   JUMP  0, 148
// @6 if #4 < #3 then -> @7 else -> @41
00148   LDM   0, 00016 (11)
00152   LDM   1, 00012 (11)
00156   COMP  0, 1 
00158   JL    0, 166
00162   JUMP  0, 66
// @7 n#2 := 1 -> @8
65512   LIT  I(1)
00166   LDM   0, 65512
00170   STM   0, 00008 (11)
// @8 #3 := x#1 -> @9
00174   LDM   0, 00004 (11)
00178   STM   0, 00012 (11)
// @9 #4 := 0-1 -> @10
00182   LDM   0, 65520
00186   LDM   1, 65512
00190   SUB   0, 1 
00192   STM   0, 00016 (11)
// @10 #4 := #4 -> @11
00196   LDM   0, 00016 (11)
00200   STM   0, 00016 (11)
// @11 if #3 < #4 then -> @13 else -> @12
00204   LDM   0, 00012 (11)
00208   LDM   1, 00016 (11)
00212   COMP  0, 1 
00214   JL    0, 244
00218   JUMP  0, 226
// @12 if #4 < #3 then -> @13 else -> @22
00226   LDM   0, 00016 (11)
00230   LDM   1, 00012 (11)
00234   COMP  0, 1 
00236   JL    0, 244
00240   JUMP  0, 354
// @13 #3 := n#2 -> @14
00244   LDM   0, 00008 (11)
00248   STM   0, 00012 (11)
// @14 #4 := 0 -> @15
00252   LDM   0, 65520
00256   STM   0, 00016 (11)
// @15 if #3 = #4 then -> @16 else -> @18
00260   LDM   0, 00012 (11)
00264   LDM   1, 00016 (11)
00268   COMP  0, 1 
00270   JE    0, 278
00274   JUMP  0, 304
// @16 #3 := 0-1 -> @17
00278   LDM   0, 65520
00282   LDM   1, 65512
00286   SUB   0, 1 
00288   STM   0, 00012 (11)
// @17 x#1 := #3 -> @21
00292   LDM   0, 00012 (11)
00296   STM   0, 00004 (11)
00300   JUMP  0, 00340 (0)
// @18 #3 := x#1-1 -> @19
00304   LDM   0, 00004 (11)
00308   LDM   1, 65512
00312   SUB   0, 1 
00314   STM   0, 00012 (11)
// @19 #4 := n#2+#3 -> @20
00318   LDM   0, 00008 (11)
00322   LDM   1, 00012 (11)
00326   ADD   0, 1 
00328   STM   0, 00016 (11)
// @20 n#2 := #4 -> @21
00332   LDM   0, 00016 (11)
00336   STM   0, 00008 (11)
// @21 read x#1 -> @8
00340   LDM  14, 65524
00344   HALT  0, 0 
00346   STM  15, 00004 (11)
00350   JUMP  0, 00174 (0)
// @22 #3 := x#1 -> @23
00354   LDM   0, 00004 (11)
00358   STM   0, 00012 (11)
// @23 #4 := 0-1 -> @24
00362   LDM   0, 65520
00366   LDM   1, 65512
00370   SUB   0, 1 
00372   STM   0, 00016 (11)
// @24 #4 := #4 -> @25
00376   LDM   0, 00016 (11)
00380   STM   0, 00016 (11)
// @25 if #3 = #4 then -> @26 else -> @31
00384   LDM   0, 00012 (11)
00388   LDM   1, 00016 (11)
00392   COMP  0, 1 
00394   JE    0, 402
00398   JUMP  0, 458
// @26 #3 := n#2 -> @27
00402   LDM   0, 00008 (11)
00406   STM   0, 00012 (11)
// @27 #4 := 0 -> @28
00410   LDM   0, 65520
00414   STM   0, 00016 (11)
// @28 if #3 = #4 then -> @29 else -> @31
00418   LDM   0, 00012 (11)
00422   LDM   1, 00016 (11)
00426   COMP  0, 1 
00428   JE    0, 436
00432   JUMP  0, 458
// @29 #3 := 1 -> @30
00436   LDM   0, 65512
00440   STM   0, 00012 (11)
// @30 write #3 -> @40
00444   LDM  15, 00012 (11)
65464   LIT  C'OUT:'
00448   LDM  14, 65464
00452   HALT  0, 0 
00454   JUMP  0, 00574 (0)
// @31 #3 := x#1 -> @32
00458   LDM   0, 00004 (11)
00462   STM   0, 00012 (11)
// @32 #4 := 0-1 -> @33
00466   LDM   0, 65520
00470   LDM   1, 65512
00474   SUB   0, 1 
00476   STM   0, 00016 (11)
// @33 #4 := #4 -> @34
00480   LDM   0, 00016 (11)
00484   STM   0, 00016 (11)
// @34 if #3 < #4 then -> @36 else -> @35
00488   LDM   0, 00012 (11)
00492   LDM   1, 00016 (11)
00496   COMP  0, 1 
00498   JL    0, 528
00502   JUMP  0, 510
// @35 if #4 < #3 then -> @36 else -> @37
00510   LDM   0, 00016 (11)
00514   LDM   1, 00012 (11)
00518   COMP  0, 1 
00520   JL    0, 528
00524   JUMP  0, 542
// @36 read x#1 -> @31
00528   LDM  14, 65524
00532   HALT  0, 0 
00534   STM  15, 00004 (11)
00538   JUMP  0, 00458 (0)
// @37 #3 := 0-1 -> @38
00542   LDM   0, 65520
00546   LDM   1, 65512
00550   SUB   0, 1 
00552   STM   0, 00012 (11)
// @38 #3 := #3 -> @39
00556   LDM   0, 00012 (11)
00560   STM   0, 00012 (11)
// @39 write #3 -> @40
00564   LDM  15, 00012 (11)
00568   LDM  14, 65464
00572   HALT  0, 0 
// @40 read x#1 -> @2
00574   LDM  14, 65524
00578   HALT  0, 0 
00580   STM  15, 00004 (11)
00584   JUMP  0, 00096 (0)
// End of main
65432   LIT  C'STOP'

