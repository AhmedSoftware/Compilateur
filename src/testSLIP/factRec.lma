00000   LDA  11, 0 
00004   LDA  12, 360
00008   LDA  13, 65484
00012   JUMP 10, 26
00016   LDM  14, 65480
00020   HALT  0, 0 
00022   JUMP  0, 20
// Begin of main
// Assez de place pour un nouveau frame ?
00026   LDA   0, 00032 (12)
00030   COMP 13, 0 
00032   JGE   0, 00046
65532   LIT  C'ERR:'
00036   LDM  14, 65532
65528   LIT  C'OVFL'
00040   LDM  15, 65528
00044   HALT  0, 0 
00046   STM  11, 00024 (12)
00050   STM  10, 00028 (12)
00054   LDA  11, 00000 (12)
00058   ADDA 12, 00032
00062   JUMP  0, 00086 (0)
00066   LDM   0, 00000 (11)
00070   LDA  12, 00000 (11)
00074   LDM  11, 00024 (12)
00078   LDM  10, 00028 (12)
00082   JUMP  0, 00000 (10)
// @1 read x#1 -> @2
65524   LIT  C' IN:'
00086   LDM  14, 65524
00090   HALT  0, 0 
00092   STM  15, 00004 (11)
// @2 #3 := x#1 -> @3
00096   LDM   0, 00004 (11)
00100   STM   0, 00012 (11)
// @3 #4 := fact(#3) -> 4
// Assez de place pour les paramètres ?
00104   LDA   0, 00008 (12)
00108   COMP 13, 0 
00110   JGE   0, 00124 (0)
00114   LDM  14, 65532
00118   LDM  15, 65528
00122   HALT  0, 0 
00124   LDM   0, 00012 (11)
00128   STM   0, 00004 (12)
00132   JUMP 10, 170
00136   STM   0, 00016 (11)
// @4 y#2 := #4 -> @5
00140   LDM   0, 00016 (11)
00144   STM   0, 00008 (11)
// @5 #3 := y#2 -> @6
00148   LDM   0, 00008 (11)
00152   STM   0, 00012 (11)
// @6 write #3 -> @7
00156   LDM  15, 00012 (11)
65512   LIT  C'OUT:'
00160   LDM  14, 65512
00164   HALT  0, 0 
00166   JUMP  0, 00066 (0)
// End of main
// Begin of fact
// Assez de place pour un nouveau frame ?
00170   LDA   0, 00032 (12)
00174   COMP 13, 0 
00176   JGE   0, 00190
00180   LDM  14, 65532
00184   LDM  15, 65528
00188   HALT  0, 0 
00190   STM  11, 00024 (12)
00194   STM  10, 00028 (12)
00198   LDA  11, 00000 (12)
00202   ADDA 12, 00032
00206   JUMP  0, 00230 (0)
00210   LDM   0, 00000 (11)
00214   LDA  12, 00000 (11)
00218   LDM  11, 00024 (12)
00222   LDM  10, 00028 (12)
00226   JUMP  0, 00000 (10)
// @1 #2 := x#1 -> @2
00230   LDM   0, 00004 (11)
00234   STM   0, 00008 (11)
// @2 #3 := 0 -> @3
65500   LIT  I(0)
00238   LDM   0, 65500
00242   STM   0, 00012 (11)
// @3 if #2 = #3 then -> @4 else -> @5
00246   LDM   0, 00008 (11)
00250   LDM   1, 00012 (11)
00254   COMP  0, 1 
00256   JE    0, 264
00260   JUMP  0, 276
// @4 factResult#0 := 1 -> @10
65496   LIT  I(1)
00264   LDM   0, 65496
00268   STM   0, 00000 (11)
00272   JUMP  0, 00210 (0)
// @5 #2 := x#1-1 -> @6
00276   LDM   0, 00004 (11)
00280   LDM   1, 65496
00284   SUB   0, 1 
00286   STM   0, 00008 (11)
// @6 #2 := #2 -> @7
00290   LDM   0, 00008 (11)
00294   STM   0, 00008 (11)
// @7 #3 := fact(#2) -> 8
// Assez de place pour les paramètres ?
00298   LDA   0, 00008 (12)
00302   COMP 13, 0 
00304   JGE   0, 00318 (0)
00308   LDM  14, 65532
00312   LDM  15, 65528
00316   HALT  0, 0 
00318   LDM   0, 00008 (11)
00322   STM   0, 00004 (12)
00326   JUMP 10, 170
00330   STM   0, 00012 (11)
// @8 #4 := x#1*#3 -> @9
00334   LDM   0, 00004 (11)
00338   LDM   1, 00012 (11)
00342   MUL   0, 1 
00344   STM   0, 00016 (11)
// @9 factResult#0 := #4 -> @10
00348   LDM   0, 00016 (11)
00352   STM   0, 00000 (11)
00356   JUMP  0, 00210 (0)
// End of fact
65480   LIT  C'STOP'

